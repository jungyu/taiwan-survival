# 網狀網路與離線通訊指南

## 概述

當傳統通訊基礎設施遭到破壞時，網狀網路（Mesh Network）與離線通訊技術成為維持聯繫的重要手段。本指南提供建立分散式通訊網路的實用方法與技術。

---

## 🕸️ 網狀網路基本概念

### 網狀網路原理

#### 基本特性

```yaml
分散式架構：
• 無中心節點：每個設備都是節點
• 自動路由：訊息自動找最佳路徑
• 容錯能力：部分節點失效不影響全網
• 擴展性：節點越多覆蓋越廣

技術優勢：
□ 抗干擾能力強
□ 無需基礎設施
□ 成本相對低廉
□ 部署快速靈活
```

#### 適用情境

```yaml
災難應變：
• 地震、颱風後基建損毀
• 電力系統大規模故障
• 通訊基站被攻擊破壞
• 網路遭到惡意癱瘓

戰時通訊：
□ 敵軍攻擊通訊設施
□ 電磁脈衝武器攻擊
□ 網路戰與資訊戰
□ 長期圍困與封鎖

偏遠地區：
• 山區、離島通訊困難
• 基礎建設不完善
• 商業通訊成本過高
• 特殊環境需求
```

---

## 📱 實用網狀網路解決方案

### Briar（推薦方案）

#### 技術特點

```yaml
去中心化設計：
• 點對點通訊：無需中央伺服器
• 藍牙網狀：近距離自動連接
• WiFi Direct：中距離擴展
• Tor網路：遠距離匿名通訊

安全特性：
□ 端對端加密
□ 前向保密
□ 無中繼儲存
□ 匿名通訊
```

#### 安裝與設定

```yaml
基本安裝：
1. F-Droid商店下載
2. 官網：briarproject.org
3. 開源APK直接安裝
4. 目前僅支援Android

初始設定：
• 建立本地身份
• 設定顯示名稱
• 備份身份金鑰
• 調整隱私設定

網路設定：
□ 藍牙：短距離連接
□ WiFi：中距離連接
□ Tor：遠距離連接
□ 離線：僅本地儲存
```

### FireChat（已停止）

#### 替代方案

```yaml
類似應用：
• Bridgefy：商用網狀通訊
• Disaster.radio：開源硬體方案
• Gotenna：專用硬體網狀
• Serval Project：緊急通訊

開源替代：
□ Freifunk：社區網路
□ Commotion：社區網狀
□ OpenWrt：路由器韌體
□ Libremesh：網狀路由
```

### WiFi網狀路由器

#### 硬體解決方案

```yaml
專業級設備：
• Ubiquiti：企業級網狀系統
• TP-Link Omada：商用網狀
• Netgear Orbi：家用網狀
• ASUS AiMesh：消費級網狀

開源硬體：
□ Raspberry Pi + OpenWrt
□ 廢棄路由器改裝
□ Arduino + WiFi模組
□ ESP32開發板方案
```

---

## 🛠️ DIY網狀網路建置

### 基本硬體需求

#### Raspberry Pi方案

```yaml
硬體清單：
• Raspberry Pi 4B（4GB版本）
• MicroSD卡 32GB（高速卡）
• USB WiFi適配器（雙頻）
• 行動電源（20000mAh）
• 防水盒（戶外使用）

成本估算：
□ 樹莓派主板：台幣3000元
□ 配件與記憶卡：台幣1500元
□ WiFi適配器：台幣800元
□ 電源與保護：台幣1200元
□ 總計約：台幣6500元
```

#### 軟體安裝

```yaml
作業系統：
• Raspberry Pi OS Lite
• OpenWrt（推薦）
• Commotion Router
• LibreMesh韌體

基本配置：
1. 燒錄作業系統到SD卡
2. 開啟SSH遠端存取
3. 安裝網狀網路軟體
4. 配置WiFi熱點功能
5. 設定DHCP與路由規則
```

### 網路拓撲設計

#### 家庭級網狀網路

```yaml
節點配置：
節點A（主節點）：
• 位置：客廳或中心位置
• 功能：網路閘道、DHCP伺服器
• 設備：路由器 + 網路連線

節點B（中繼節點）：
• 位置：樓梯間或走廊
• 功能：訊號中繼與擴展
• 設備：WiFi網狀設備

節點C（邊緣節點）：
• 位置：臥室或邊角
• 功能：最終覆蓋區域
• 設備：簡單WiFi設備

連接策略：
□ 每個節點至少連接2個其他節點
□ 節點間距離保持30-50公尺
□ 考慮建築物阻擋因素
□ 設置冗餘路徑避免單點故障
```

#### 社區級網狀網路

```yaml
架構規劃：
骨幹層：
• 高功率基地台：樓頂或高點
• 定向天線：點對點長距離連接
• 有線備援：光纖或乙太網路

分散層：
□ 區域節點：每棟建築物設置
□ 全向天線：360度覆蓋
□ 中等功率：平衡覆蓋與耗電

接入層：
• 家庭節點：室內WiFi熱點
• 行動節點：手機、平板連接
• 感測節點：IoT設備連接
```

---

## 📡 離線通訊技術

### 藍牙網狀通訊

#### Bridgefy應用

```yaml
技術特點：
• 藍牙低功耗：省電長效
• 自動發現：附近設備自動連接
• 多跳傳輸：透過多個設備中繼
• 離線訊息：無網路時也能傳遞

使用範圍：
□ 直接連接：10-100公尺
□ 一跳中繼：200-500公尺
□ 多跳網狀：數公里範圍
□ 人群密集：效果更佳
```

#### 實際應用範例

**災區救援通訊：**

```text
情境：山區健行隊伍走失
人員：領隊、隊員6人、搜救隊
工具：Bridgefy App

通訊流程：
1. 領隊發現隊員走失，啟動Bridgefy
2. 其他隊員開啟應用程式形成網狀
3. 走失隊員訊息透過其他人中繼傳遞
4. 搜救隊收到位置資訊前往救援
```

### AirDrop / Android Beam

#### 近場檔案傳輸

```yaml
iOS AirDrop：
• 傳輸距離：9公尺內
• 傳輸速度：高速檔案傳輸
• 支援格式：照片、影片、文件
• 安全性：端對端加密

Android Nearby Share：
□ 傳輸距離：類似AirDrop
□ 跨平台支援：Android間傳輸
□ 檔案類型：多格式支援
□ 網路需求：藍牙 + WiFi Direct
```

#### 緊急資訊散佈

```yaml
應用情境：
• 災害警報：快速傳遞警報資訊
• 醫療資訊：病歷、過敏資訊傳遞
• 聯絡資訊：緊急聯絡人分享
• 地圖資料：離線地圖分享

操作策略：
□ 預先準備緊急資訊包
□ 統一檔案命名規則
□ 設定自動接收範圍
□ 定期更新重要資料
```

---

## 🌐 社區網狀網路建置指南

### 規劃階段

#### 需求評估

```yaml
基本需求：
• 覆蓋範圍：社區大小與建築分布
• 使用人數：同時上線用戶數量
• 應用需求：語音、文字、檔案傳輸
• 電力供應：停電時的備援方案

技術需求：
□ 頻寬需求：每用戶平均頻寬
□ 延遲要求：即時通訊延遲標準
□ 可靠性：網路可用時間要求
□ 安全性：資料加密與存取控制
```

#### 硬體規劃

```yaml
節點部署：
主節點（3-5個）：
• 位置：制高點、中心建築
• 設備：高功率路由器 + 定向天線
• 電源：UPS + 太陽能備援
• 網路：有線骨幹連接

次節點（10-20個）：
□ 位置：各建築物樓頂
□ 設備：中功率路由器 + 全向天線
□ 電源：UPS備援
□ 網路：無線連接到主節點

終端節點（50-100個）：
• 位置：家庭、辦公室內部
• 設備：一般WiFi路由器
• 電源：一般市電
• 網路：連接到次節點
```

### 實施階段

#### 硬體安裝

```yaml
天線架設：
• 高度規劃：避免建築物遮擋
• 方向調整：最佳訊號強度
• 防雷保護：接地與避雷器
• 防風加固：結構強化處理

設備配置：
□ IP位址規劃：避免衝突
□ 頻道配置：減少相互干擾
□ 功率調整：最佳訊號覆蓋
□ 安全設定：加密與存取控制
```

#### 軟體設定

```yaml
路由協定：
• OLSR：優化鏈路狀態路由
• Batman-adv：更好的網狀路由
• Babel：簡單可靠的路由協定
• 802.11s：標準網狀協定

服務設定：
□ DHCP伺服器：自動IP分配
□ DNS伺服器：網域名稱解析
□ 網頁入口：使用者認證與資訊
□ 監控系統：網路狀態監控
```

---

## 📻 緊急廣播系統

### 低功率FM廣播

#### 技術方案

```yaml
硬體需求：
• FM發射器：1-5瓦功率
• 音源設備：電腦、手機、麥克風
• 天線系統：1/4波長鞭狀天線
• 電源供應：12V直流電源

覆蓋範圍：
□ 1瓦功率：半徑1-2公里
□ 5瓦功率：半徑3-5公里
□ 地形影響：平地效果較佳
□ 建築阻擋：室內接收困難
```

#### 法規注意事項

```yaml
台灣法規：
• 功率限制：100毫瓦以下免執照
• 頻率限制：指定業餘頻段
• 使用限制：非商業用途
• 干擾責任：不得干擾合法電台

申請程序：
□ 功率超過限制需申請執照
□ 提供設備規格與使用計畫
□ 繳交規費與保證金
□ 定期檢驗與執照更新
```

### 擴音廣播系統

#### 社區廣播系統

```yaml
有線廣播：
• 喇叭配置：主要路口與廣場
• 線路佈設：地下管線或架空
• 控制中心：社區管理中心
• 備援電源：UPS與發電機

無線廣播：
□ 大功率擴音器：電動擴音器
□ 車載廣播：行動廣播車
□ 手提廣播：電池式擴音器
□ 定點廣播：固定位置喇叭
```

---

## 🔋 電力與能源管理

### 節點電力供應

#### 主要電源

```yaml
市電供應：
• 穩定性：電網供電最穩定
• 成本：長期使用成本最低
• 依賴性：依賴電力基礎設施
• 風險：停電時無法運作

備援電源：
□ UPS系統：短期停電備援
□ 發電機：長期停電供電
□ 汽車電源：12V直流電源
□ 行動電源：小功率設備
```

#### 再生能源

```yaml
太陽能系統：
• 太陽能板：100-300瓦功率
• 充電控制器：MPPT類型
• 蓄電池：深循環鉛酸或鋰電
• 逆變器：12V轉110V交流

風力發電：
□ 小型風機：500瓦以下
□ 適用環境：風速充足地區
□ 維護需求：定期檢查維護
□ 成本考量：初期投資較高
```

### 功耗優化

#### 硬體節能

```yaml
設備選擇：
• 低功耗CPU：ARM架構處理器
• 節能WiFi：802.11n/ac標準
• LED指示燈：減少不必要指示
• 自動休眠：閒置時自動省電

配置優化：
□ 傳輸功率：調整到最佳值
□ 掃描間隔：延長掃描週期
□ 背景服務：關閉不必要服務
□ 更新頻率：降低狀態更新頻率
```

---

## 🛡️ 安全與隱私保護

### 網路安全

#### 加密保護

```yaml
連線加密：
• WPA3：最新WiFi加密標準
• WPA2：廣泛支援的加密標準
• VPN：額外的加密層保護
• SSL/TLS：應用層加密

存取控制：
□ MAC位址過濾：硬體位址白名單
□ 用戶認證：密碼或憑證驗證
□ 防火牆規則：流量過濾控制
□ 入侵偵測：異常行為監控
```

#### 匿名保護

```yaml
身份保護：
• 假名使用：避免真實身份
• MAC隨機化：硬體位址隨機
• 流量混淆：隱藏通訊模式
• 跳板節點：多層中繼保護

資料保護：
□ 本地加密：敏感資料加密儲存
□ 定期清除：暫存資料定期刪除
□ 最小化原則：只收集必要資訊
□ 分散儲存：避免單點洩漏
```

---

## 📊 效能監控與維護

### 網路監控

#### 監控指標

```yaml
連線品質：
• 訊號強度：RSSI數值
• 封包遺失率：丟包百分比
• 延遲時間：往返時間RTT
• 頻寬使用率：流量統計

節點狀態：
□ CPU使用率：處理器負載
□ 記憶體使用：RAM使用情況
□ 儲存空間：磁碟使用量
□ 溫度監控：硬體溫度
```

#### 監控工具

```yaml
開源工具：
• Nagios：企業級監控系統
• Zabbix：網路設備監控
• PRTG：網路流量監控
• LibreNMS：開源網路監控

簡易工具：
□ Ping：基本連通性測試
□ Traceroute：路由路徑追蹤
□ Iperf：頻寬測試工具
□ WiFi Analyzer：無線網路分析
```

### 維護策略

#### 定期維護

```yaml
每週檢查：
• 連線狀態：所有節點連線正常
• 訊號品質：信號強度與品質
• 電力狀況：電池電量與充電
• 更新狀態：軟體與韌體更新

每月維護：
□ 硬體清潔：移除灰塵與污垢
□ 連接檢查：線路與接頭檢查
□ 配置備份：設定檔案備份
□ 效能評估：網路效能測試
```

#### 故障排除

```yaml
常見問題：
• 連線中斷：檢查電源與設定
• 速度緩慢：檢查干擾與負載
• 覆蓋不足：調整位置與功率
• 安全問題：更新密碼與韌體

排除流程：
□ 問題識別：確認具體症狀
□ 初步檢查：基本狀態確認
□ 逐步排除：系統性問題排除
□ 解決確認：驗證問題解決
```

---

## ✅ 實施檢核清單

### 技術準備檢核

```yaml
硬體準備：
□ 網狀路由器或設備
□ 合適的天線系統
□ 穩定的電力供應
□ 防護與安裝配件

軟體準備：
□ 網狀網路軟體安裝
□ 路由協定設定
□ 安全加密設定
□ 監控工具部署

測試驗證：
□ 基本連線測試
□ 速度與延遲測試
□ 覆蓋範圍測試
□ 故障恢復測試
```

### 組織準備檢核

```yaml
人員培訓：
□ 基本操作技能
□ 故障排除能力
□ 安全使用原則
□ 維護保養知識

制度建立：
□ 使用管理規範
□ 維護責任分工
□ 緊急應變程序
□ 資源分享協議

社區協調：
□ 居民同意與支持
□ 法規合規確認
□ 成本分攤機制
□ 長期發展規劃
```

---

**網狀網路與離線通訊是現代社區韌性的重要組成部分。透過適當的技術選擇、細心的規劃部署、持續的維護管理，可以建立真正可靠的緊急通訊網路。**
